[build-system]
requires = ["setuptools >= 61"]
build-backend = "setuptools.build_meta"

[project]
name = "player"
readme = "README.md"
requires-python = ">=3.7"
version = "1.0"
dependencies = [
    "pydantic"
]

[project.optional-dependencies]
dev = [
    "mypy",
    "pyproject-flake8==5.0.4",
    "pytest",
    "pytest-cov"
]
mypy = ["mypy"]
flake8 = ["pyproject-flake8==5.0.4", "flake8"]
pytest = ["pytest", "pytest-cov"]

[tool.setuptools]
py-modules = [
    "player"
]

[tool.black]
exclude = '''/
    # Default values for Black.
    \.eggs|\.git|\.hg|\.mypy_cache|\.nox|\.tox|\.venv|\.svn|_build|buck-out|build|dist|
    # Files generated by Thrift.
    CodeChat_Server\/gen_py|
    # Runestone's default config file.
    CodeChat_Server\/templates\/runestone
/'''

[tool.flake8]
exclude = [
    "README.md",
    '.git',
    '.venv',
    '__pycache__',
    'docs/source/conf.py',
    'old',
    'build',
    'dist'
]
format = "colored"
max_line_length = 88
show_source = true

[tool.coverage.run]
branch = true
source = ["player"]
omit = ["player/network/*"]

[tool.coverage.report]
exclude_lines = [
  "pragma: no cover",
  "def __repr__",
  "def __str__",
  "raise AssertionError",
  "raise NotImplementedError",
  "if __name__ == .__main__.:",
  "if TYPE_CHECKING:",
  "if typing.TYPE_CHECKING:"
]

[tool.coverage.html]
directory = "cov_html"

[tool.mypy]
check_untyped_defs = true
ignore_errors = false
ignore_missing_imports = true
strict_optional = true
warn_unused_ignores = true
warn_redundant_casts = true
warn_unused_configs = true
files = ["player", "tests"]
exclude = [
    "README.md",
    '.git',
    '.venv',
    '__pycache__',
    'docs/source/conf.py',
    'old',
    'build',
    'dist',
    'player/network'
]

[tool.pytest.ini_options]
minversion = "6.0.0rc1"
# Always using Coverage.py disables debugging.
addopts = "--cov=player --cov-branch --cov-report html:cov_html --cov-report=term-missing"
pythonpath = [
  "."
]
testpaths = [
    "tests",
]